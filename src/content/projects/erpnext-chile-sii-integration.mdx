---
title: "Integraci贸n de ERPNext con el SII de Chile"
description: "Automatizaci贸n del ingreso de facturas electr贸nicas desde XML del SII a ERPNext, conectando correo, Google Drive y el ERP para eliminar tareas repetitivas y errores humanos."
image: "/assets/images/projects/erpnext-chile-sii-integration/portada.webp"
tags:
  [
    "ERPNext",
    "SII",
    "facturaci贸n electr贸nica",
    "Chile",
    "Google Drive",
  ]
publishDate: "2024-08-01"
github: ""
demo: ""
---

Este proyecto fue desarrollado para automatizar completamente el ingreso de **facturas electr贸nicas (DTE)** desde los archivos XML del SII de Chile hacia el ERP **ERPNext**, reduciendo al m铆nimo el trabajo manual en el 谩rea contable.

---

import Mermaid from "../../components/Mermaid.jsx";

## З 驴Qu茅 problema resuelve?

- Las facturas llegan como archivos XML al correo (desde el proveedor o el propio SII)
- El proceso de descarga, clasificaci贸n y carga en el ERP es lento, repetitivo y propenso a errores
- Muchas facturas deben enlazarse a 贸rdenes de compra, centros de costo, bodegas o proyectos

---

## 锔 驴Qu茅 hace esta integraci贸n?

<Mermaid
  client:only="react"
  code={`flowchart TD
  A[Consulta peri贸dica SII\npor documentos recibidos] --> B[Creaci贸n inicial\nPreInvoices en ERPNext]
  C[Consulta peri贸dica\ncasilla email XML] --> D[Guardado XML en\nGoogle Drive por empresa/mes]
  E[Consulta peri贸dica\nGoogle Drive XML] --> F[Parsear XML\ny obtener detalle]
  F --> G[Buscar PreInvoice\ny agregar detalle XML]
  G --> H[Adjuntar XML a PreInvoice]
  H --> I{驴Coincide con reglas?}
  I -- S铆 --> J[Creaci贸n autom谩tica\nPurchase Invoice - PINV]
  I -- No --> K[PreInvoice pendiente\nrevisi贸n manual]
  B --> G
  D --> E
`}
/>

- Lee correos con XML adjuntos en bandejas compartidas
- Detecta autom谩ticamente a qu茅 empresa y mes corresponde el documento
- Sube el XML a Google Drive en una ruta organizada por empresa/mes
- Extrae los datos del XML y crea una **PreInvoice** en ERPNext
- Aplica reglas definidas por empresa para convertir autom谩ticamente la PreInvoice en una **Purchase Invoice**
- Identifica duplicados y maneja referencias a 贸rdenes de compra
- Adjunta el XML original al documento contable creado

---

##  Tecnolog铆as usadas

- **ERPNext** (Custom App con DocTypes, hooks, scripts Python)
- **Google Drive API** y **Gmail API**
- **Logs centralizados en Google Sheets**

> En el futuro se espera incorporar componentes de IA como FAISS y LLMs para sugerir 铆tems contables en base a descripciones. Esto se encuentra en evaluaci贸n para una versi贸n posterior.

---

##  Resultados

- Procesamiento autom谩tico de **cientos de facturas mensuales**
- Cero intervenci贸n humana en el 90% de los casos
- Trazabilidad completa: desde el XML recibido hasta el asiento contable en el ERP

---

##  Publicaci贸n del c贸digo

Este proyecto est谩 siendo adaptado para su publicaci贸n como **open source**. Una versi贸n p煤blica estar谩 disponible pr贸ximamente con documentaci贸n y ejemplos de uso.

 Por ahora el c贸digo es privado, pero si est谩s trabajando en una implementaci贸n similar, **cont谩ctame** y estar茅 encantado de ayudarte o colaborar.
